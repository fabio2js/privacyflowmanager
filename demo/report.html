<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Privacy Flow Map Report</title>
<style>
body {
  position: relative;
  background-color: #fafafa;
  color: #222;
  font-family: Arial, sans-serif;
  overflow-x: visible;
}
table { width: 100%; border-collapse: collapse; }
th, td { border: 1px solid #ccc; padding: 6px 8px; font-size: 14px; text-align: left; }
th { background: #f2f2f2; }
h1, h2 { color: #0078d4; font-weight: 600; }

 .legend {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
}

.legend-item {
  display: flex;
  align-items: center;
  font-size: 13px;
  color: #222;
}

.legend-box {
  width: 20px;
  height: 20px;
  margin-right: 6px;
  border: 1px solid #ccc;
  border-radius: 3px;
  box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.1);
}

/* âœ… Colori esatti giÃ  in uso per i nodi dei diagrammi */
.legend-service { background-color: #E3F2FD; border-color: #1E88E5; }
.legend-datastore { background-color: #F3E5F5; border-color: #8E24AA; }
.legend-thirdparty { background-color: #FFF3E0; border-color: #FB8C00; }
.legend-controller { background-color: #A8E6FF; border-color: #2AA4AD; }
.legend-processor { background-color: #E0F7FA; border-color: #00ACC1; }
.legend-subprocessor { background-color: #CCF3FA; border-color: #00BBD6; }


 .summary {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  gap: 20px;
  margin-bottom: 20px;
}

.summary-wrap {
  display: flex;
  justify-content: space-between;  /* ðŸ”¹ forza la separazione orizzontale */
  align-items: flex-start;
  width: 100%;
  gap: 40px;
}

.summary-card {
  flex: 1 1 auto;
  min-width: 300px;
}

.pie {
  flex: 0 0 auto;
  margin-left: auto;               /* ðŸ”¹ spinge il grafico tutto a destra */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* ðŸ”¹ Watermark riga 1 */
body::before {
  content: "PrivacyFlow Community Edition";
  position: fixed;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-30deg);
  font-size: 80px;
  font-weight: bold;
  color: rgba(0, 0, 0, 0.15);
  font-family: Arial, sans-serif;
  text-align: center;
  white-space: nowrap;
  z-index: 0;
  pointer-events: none;
  user-select: none;
}

/* ðŸ”¹ Watermark riga 2 */
body::after {
  content: "for internal demo only";
  position: fixed;
  top: 55%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-30deg);
  font-size: 50px;
  font-weight: bold;
  color: rgba(0, 0, 0, 0.15);
  font-family: Arial, sans-serif;
  text-align: center;
  white-space: nowrap;
  z-index: 0;
  pointer-events: none;
  user-select: none;
}

/* ðŸ”¹ Mantiene il watermark visibile in video e stampa */
body {
  position: relative;
  z-index: 1;
}

@media print {
  body::before,
  body::after {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
}

.pie svg {
  width: 160px;
  height: 160px;
  margin-bottom: 10px;
}
/* --- Footer: visibile solo in fondo all'ultima pagina --- */
.footer {
  display: block;
  text-align: center;
  font-size: 12px;
  color: #666;
  border-top: 1px solid #ddd;
  padding-top: 5px;
  margin-top: 40px;
  background: #fafafa;
}

/* âœ… Nascosto in tutte le .diagram-page (pagine intermedie) */
.diagram-page .footer {
  display: none !important;
}
@media print {
  /* forza la stampa dei background */
  html, body, .legend, .legend-item, .legend-box {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  /* ðŸ”³ quadratini legenda con bg esplicito in print */
  .legend-box { border: 1px solid #ccc !important; }

  .legend-service      { background-color: #E3F2FD !important; border-color: #1E88E5 !important; }
  .legend-datastore    { background-color: #F3E5F5 !important; border-color: #8E24AA !important; }
  .legend-thirdparty   { background-color: #FFF3E0 !important; border-color: #FB8C00 !important; }
  .legend-controller   { background-color: #A8E6FF !important; border-color: #2AA4AD !important; }
  .legend-processor    { background-color: #E0F7FA !important; border-color: #00ACC1 !important; }
  .legend-subprocessor { background-color: #CCF3FA !important; border-color: #00BBD6 !important; }

  /* anche la torta */
  .pie svg path,
  .pie svg circle {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
/* âœ… In stampa: mostrato solo sull'ultima pagina e fissato in fondo */
@media print {
  .footer {
  display: block;
  text-align: center;
  font-size: 12px;
  color: #666;
  border-top: 1px solid #ddd;
  padding-top: 5px;
  margin-top: 40px;
  background: #fafafa;
}




  /* Nascosto in tutte le sezioni precedenti */
  .diagram-page .footer {
    display: none !important;
  }
  
}
 
body::before {
  content: "PrivacyFlow Community Edition";
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-30deg);
  font-size: 90px;
  font-weight: bold;
  color: rgba(0, 0, 0, 0.15); /* ðŸ”¸ leggermente piÃ¹ scuro */
  font-family: Arial, sans-serif;
  white-space: nowrap;
  z-index: -1;
  pointer-events: none;
  isolation: isolate;
}
 
 @media print {
  body::before {
    color: rgba(0, 0, 0, 0.10); /* ðŸ”¸ un poâ€™ piÃ¹ tenue in PDF */
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

  
   @media print {
  @page { size: A4 landscape; margin: 10mm; }

  html, body {
    margin: 0 !important;
    padding: 0 !important;
    overflow: visible !important;
  }

  /* Ogni sezione di diagramma Ã¨ una pagina logica */
  .diagram-page {
    display: block !important;
    width: 100% !important;
    min-height: 180mm !important;
    overflow: visible !important;
  }

  /* Ogni nuova .diagram-page inizia una nuova pagina */
  .diagram-page + .diagram-page {
    page-break-before: always !important;
    break-before: page !important;
  }

  /* Evita spezzature interne */
  .diagram-page * {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }
  .legend-box {
    -webkit-print-color-adjust: exact !important;
    color-adjust: exact !important;
    print-color-adjust: exact !important;
    box-shadow: none !important;
  }

  .legend-service { background-color: #E3F2FD !important; }
  .legend-datastore { background-color: #F3E5F5 !important; }
  .legend-thirdparty { background-color: #FFF3E0 !important; }
  .legend-controller { background-color: #A8E6FF !important; }
  .legend-processor { background-color: #E0F7FA !important; }
  .legend-subprocessor { background-color: #CCF3FA !important; }
  /* Assicura che la legenda sia parte del flusso normale */
  .legend {
    position: static !important;
    margin-top: 8mm !important;
    margin-bottom: 0 !important;
    justify-content: center !important;
    display: flex !important;
    flex-wrap: wrap !important;
  }

  .mermaid {
    width: 100% !important;
    height: 140mm !important;
    overflow: visible !important;
  }

  .mermaid svg {
    width: 100% !important;
    height: auto !important;
    max-height: 140mm !important;
  }

  .diagram-section h2 {
    margin: 0 0 4mm 0 !important;
  }
   
}


 

 

 
</style>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
 


</head>
<body>
<h1>Privacy Flow Map Report</h1>


    <section class="summary">
      <div class="summary-wrap">
        <div class="summary-card">
          <h2>ðŸ“Š Privacy Flow Summary</h2>
          <ul>
            <li><b>Total nodes:</b> 4</li>
            <li><b>Total flows:</b> 3</li>
            <li><b>Controllers:</b> 0</li>
            <li><b>Processors:</b> 0</li>
            <li><b>Third-party systems:</b> 1</li>
            <li><b>Data stores:</b> 1</li>
            <li><b>Services:</b> 1</li>
          </ul>
        </div>
        <div class="pie">
          
    <svg class="pie" viewBox="0 0 140 140" width="160" height="160" aria-label="Role Breakdown">
      <circle cx="70" cy="70" r="60" fill="#f5f5f5" stroke="#ddd" />
      <path d="M 70 70 L 130.000 70.000 A 60 60 0 0 1 130.000 70.000 Z" fill="#A8E6FF" stroke="#ccc" /><path d="M 70 70 L 130.000 70.000 A 60 60 0 0 1 130.000 70.000 Z" fill="#E0F7FA" stroke="#ccc" /><path d="M 70 70 L 130.000 70.000 A 60 60 0 0 1 40.000 121.962 Z" fill="#F3E5F5" stroke="#ccc" /><path d="M 70 70 L 40.000 121.962 A 60 60 0 0 1 40.000 18.038 Z" fill="#FFF3E0" stroke="#ccc" /><path d="M 70 70 L 40.000 18.038 A 60 60 0 0 1 130.000 70.000 Z" fill="#E3F2FD" stroke="#ccc" />
    </svg>
    
          
    <div style="font-size:13px;">
      <div style="display:flex;align-items:center;gap:6px;"><span style="display:inline-block;width:12px;height:12px;background:#A8E6FF;border:1px solid #bbb;"></span>Controllers</div>
      <div style="display:flex;align-items:center;gap:6px;"><span style="display:inline-block;width:12px;height:12px;background:#E0F7FA;border:1px solid #bbb;"></span>Processors</div>
      <div style="display:flex;align-items:center;gap:6px;"><span style="display:inline-block;width:12px;height:12px;background:#F3E5F5;border:1px solid #bbb;"></span>Datastores</div>
      <div style="display:flex;align-items:center;gap:6px;"><span style="display:inline-block;width:12px;height:12px;background:#FFF3E0;border:1px solid #bbb;"></span>Third-parties</div>
      <div style="display:flex;align-items:center;gap:6px;"><span style="display:inline-block;width:12px;height:12px;background:#E3F2FD;border:1px solid #bbb;"></span>Services</div>
    </div>
    
        </div>
      </div>
    </section>
    
    <section class="gdpr-roles" style="margin:20px 0 30px;">
      <h2>Ruoli GDPR</h2>
      <p>Elenco dei soggetti identificati nel modello come titolari, responsabili o sub-responsabili del trattamento.</p>
      <table><thead><tr><th>name</th><th>role</th><th>region</th><th>dpo</th><th>lawful basis</th></tr></thead><tbody><tr><td>Customer Portal</td><td>controller</td><td>EU</td><td></td><td>contract</td></tr><tr><td>Primary Database</td><td>controller</td><td>EU</td><td></td><td>contract</td></tr><tr><td>Email Service</td><td>processor</td><td>US</td><td></td><td>consent</td></tr></tbody></table>
    </section>
    

 

<div id="diagrams" class="diagrams-container">
            <div class="diagram-page">
              <section class="diagram-section">
                <h2>Diagramma dei flussi</h2>
                <div id="mermaid-target-1" class="mermaid" style="text-align:center;margin:10px auto;width:95%;max-width:1400px;"></div>
                <script class="mermaid-code" type="text/plain" data-target="mermaid-target-1">flowchart LR
    data_subject["Utente / Cliente"]
    webapp["Customer Portal"]
    db_main["Primary Database"]
    notif["Email Service"]
    acme["acme"]
    data_subject -->|"servizio_principale - contract"| acme
    webapp -->|"account_management - contract"| db_main
    webapp -->|"notifications - consent"| notif
classDef service fill:#E3F2FD,stroke:#1E88E5,color:#0D47A1;
classDef datastore fill:#F3E5F5,stroke:#8E24AA,color:#4A148C;
classDef thirdparty fill:#FFF3E0,stroke:#FB8C00,color:#E65100;
classDef processor fill:#E0F7FA,stroke:#00ACC1,color:#006064;
classDef controller fill:#A8E6FF,stroke:#2AA4AD,color:#006064;
class data_subject subject;
class webapp controller;
class db_main controller;
class notif processor;</script>
                <div class="legend">
                  <div class="legend-item"><div class="legend-box legend-service"></div>Servizio interno</div>
                  <div class="legend-item"><div class="legend-box legend-datastore"></div>Archivio dati</div>
                  <div class="legend-item"><div class="legend-box legend-thirdparty"></div>Terza parte / Fornitore esterno</div>
                  <div class="legend-item"><div class="legend-box legend-controller"></div>Titolare del trattamento</div>
                  <div class="legend-item"><div class="legend-box legend-processor"></div>Responsabile del trattamento</div>
                  <div class="legend-item"><div class="legend-box legend-subprocessor"></div>Sub-responsabile del trattamento</div>
                </div>
              </section>
            </div>
            </div>


<section id="nodes-section">
  <h2>Nodi</h2>
  <table><thead><tr><th>id</th><th>name</th><th>type (Technical)</th></tr></thead><tbody><tr><td>data_subject</td><td>Utente / Cliente</td><td>subject</td></tr><tr><td>webapp</td><td>Customer Portal</td><td>service</td></tr><tr><td>db_main</td><td>Primary Database</td><td>datastore</td></tr><tr><td>notif</td><td>Email Service</td><td>thirdparty</td></tr></tbody></table>
</section>

<h2>Flussi</h2>
<table><thead><tr><th>source</th><th>target</th><th>purpose</th><th>lawful basis</th></tr></thead><tbody><tr><td>data_subject</td><td>acme</td><td>servizio_principale</td><td>contract</td></tr><tr><td>webapp</td><td>db_main</td><td>account_management</td><td>contract</td></tr><tr><td>webapp</td><td>notif</td><td>notifications</td><td>consent</td></tr></tbody></table>

 
<div class="footer">
Generato il 2025-10-16 13:36:02
</div>
<p style="font-size:12px; text-align:center; color:#666;">
PrivacyFlow 2025 PrivacyFlow Labs â€“ All rights reserved.<br>
</p>


 <script>
mermaid.initialize({ startOnLoad: false, securityLevel: 'loose' });
window.addEventListener('DOMContentLoaded', () => {
  const blocks = document.querySelectorAll('script.mermaid-code[type="text/plain"]');
  blocks.forEach((block, idx) => {
    const code = (block.textContent || '').trim();
    const targetId = block.dataset.target;
    const target = document.getElementById(targetId);
    if (!code || !target) return;
    mermaid.render(`pf_${idx + 1}`, code, target)
      .then(({ svg, bindFunctions }) => {
        target.innerHTML = svg;
        if (bindFunctions) bindFunctions(target);
      })
      .catch(err => console.error('Mermaid render error:', err));
  });
});
</script>
</body>
</html>
